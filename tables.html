<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tables</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5" crossorigin="anonymous">

</head>
<body>
<h1>Tables</h1>
<ul class="table-list">

</ul>


<script>
    function createTable(id, name, phone, email) {

        const card = "<table  class='pure-table pure-table-horizontal'>" +
            "<tr><th>id</th><td>" + id + "</td></tr>" +
            "<tr><th>name</th><td>" + name + "</td></tr>" +
            "<tr><th>phone</th><td>" + phone + "</td></tr>" +
            "<tr><th>email</th><td>" + email + "</td></tr>" +
            "</table><br>";
        return card;
    }
</script>


<script>
    fetch("/fetchTableList")
        .then(function (   response   ) {
            return response.json();
        })
        .catch(err => {
            console.log('error is:', err);
            console.log('catch1');
        })
        .then(function ( data ) {
            for (let i = 0; i < data.length; i++) {
                const parentList = document.querySelector('.table-list');
                const liEl = document.createElement('li');
                liEl.innerHTML = createTable(data[i].id, data[i].name, data[i].phone, data[i].email);
                parentList.appendChild(liEl);
            }
        })
        .catch(err => {
            console.log('error is:', err);
            console.log('catch1');
        });
</script>
</body>
</html>